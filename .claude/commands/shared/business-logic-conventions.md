# ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´ ê³µí†µ ê·œì¹™

> ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´ ê°œë°œ ë° ë¦¬ë·° ì‹œ ê³µí†µìœ¼ë¡œ ì ìš©ë˜ëŠ” í•µì‹¬ ê·œì¹™

**ì´ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ëŠ” íŒŒì¼:**
- `specialists/business-logic-dev.md` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œë°œ ê°€ì´ë“œ
- `specialists/business-logic-review.md` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¦¬ë·° ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨
1. [í•µì‹¬ ì›ì¹™](#í•µì‹¬-ì›ì¹™)
2. [ë ˆì´ì–´ ì±…ì„](#ë ˆì´ì–´-ì±…ì„)
3. [ìˆœìˆ˜ í•¨ìˆ˜ ì›ì¹™](#ìˆœìˆ˜-í•¨ìˆ˜-ì›ì¹™)
4. [ë¶ˆë³€ì„± ê·œì¹™](#ë¶ˆë³€ì„±-ê·œì¹™)
5. [ê¸ˆì§€ ì‚¬í•­](#ê¸ˆì§€-ì‚¬í•­)
6. [íŒŒì¼ êµ¬ì¡° ê·œì¹™](#íŒŒì¼-êµ¬ì¡°-ê·œì¹™)
7. [ë„¤ì´ë° ê·œì¹™](#ë„¤ì´ë°-ê·œì¹™)
8. [ë„ë©”ì¸ íŒ¨í„´](#ë„ë©”ì¸-íŒ¨í„´)
9. [íƒ€ì… ì •ì˜ ê·œì¹™](#íƒ€ì…-ì •ì˜-ê·œì¹™)
10. [í…ŒìŠ¤íŠ¸ ê·œì¹™](#í…ŒìŠ¤íŠ¸-ê·œì¹™)
11. [ë³µì¡ë„ ê´€ë¦¬](#ë³µì¡ë„-ê´€ë¦¬)

---

## í•µì‹¬ ì›ì¹™

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë‹¨ì¼ ì±…ì„

```
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´ = ë„ë©”ì¸ ê·œì¹™ + ìˆœìˆ˜ í•¨ìˆ˜
```

**í•µì‹¬ ê·œì¹™:**
- âœ… ìˆœìˆ˜ í•¨ìˆ˜ (Pure Functions)
- âœ… ë¶ˆë³€ì„± (Immutability)
- âœ… í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± (Testability)
- âŒ ë¶€ì‘ìš© ì—†ìŒ (No Side Effects)
- âŒ ì™¸ë¶€ ìƒíƒœ ì˜ì¡´ ì—†ìŒ (No External Dependencies)

---

## ë ˆì´ì–´ ì±…ì„

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ í•´ì•¼ í•  ì¼

| ì±…ì„ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| ë„ë©”ì¸ ê·œì¹™ | ë¹„ì¦ˆë‹ˆìŠ¤ ë£° êµ¬í˜„ | "50,000ì› ì´ìƒ ë¬´ë£Œ ë°°ì†¡" |
| ê³„ì‚° ë¡œì§ | ìˆ˜ì¹˜ ê³„ì‚° | ì´ì•¡, í• ì¸ìœ¨, ì„¸ê¸ˆ ê³„ì‚° |
| ê²€ì¦ ë¡œì§ | ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ | ì´ë©”ì¼ í˜•ì‹, ë¹„ë°€ë²ˆí˜¸ ê°•ë„ |
| ë³€í™˜ ë¡œì§ | ë°ì´í„° í¬ë§·íŒ… | ì „í™”ë²ˆí˜¸ í¬ë§·, ë‚ ì§œ í¬ë§· |
| ìƒíƒœ ë¨¸ì‹  | ìƒíƒœ ì „ì´ ê´€ë¦¬ | ì£¼ë¬¸ ìƒíƒœ, ê²°ì œ ìƒíƒœ |
| ê¶Œí•œ ë¡œì§ | ì ‘ê·¼ ê¶Œí•œ í™•ì¸ | ì‚¬ìš©ì ê¶Œí•œ, ì—­í•  ê¸°ë°˜ |

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ í•˜ë©´ ì•ˆ ë˜ëŠ” ì¼

| ê¸ˆì§€ | ì´ìœ  | ì˜¬ë°”ë¥¸ ìœ„ì¹˜ |
|------|------|-------------|
| UI ë Œë”ë§ | í‘œí˜„ ê³„ì¸µ | `components/` í´ë” |
| API í˜¸ì¶œ | ë°ì´í„° ê³„ì¸µ | `api/` í´ë” |
| ìƒíƒœ ê´€ë¦¬ | ìƒíƒœ ê³„ì¸µ | `store/` ë˜ëŠ” `context/` |
| ë¼ìš°íŒ… | ë„¤ë¹„ê²Œì´ì…˜ ê³„ì¸µ | `navigation/` |
| ì™¸ë¶€ ìƒíƒœ ë³€ê²½ | ë¶€ì‘ìš© | í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì²˜ë¦¬ |
| ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ | ë¶€ì‘ìš© | í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì²˜ë¦¬ |

---

## ìˆœìˆ˜ í•¨ìˆ˜ ì›ì¹™

### ì›ì¹™: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ìˆœìˆ˜ í•¨ìˆ˜

**ìˆœìˆ˜ í•¨ìˆ˜ì˜ 3ê°€ì§€ ì¡°ê±´:**
1. **ë™ì¼í•œ ì…ë ¥ â†’ í•­ìƒ ë™ì¼í•œ ì¶œë ¥**
2. **ì™¸ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ** (No Side Effects)
3. **ì™¸ë¶€ ìƒíƒœì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ** (No External Dependencies)

### ìˆœìˆ˜ í•¨ìˆ˜ ì˜ˆì‹œ

```typescript
// âœ… ìˆœìˆ˜ í•¨ìˆ˜
export const calculateTotal = (price: number, quantity: number): number => {
  return price * quantity;
};

// í•­ìƒ ë™ì¼í•œ ê²°ê³¼
calculateTotal(10000, 2); // â†’ 20000
calculateTotal(10000, 2); // â†’ 20000
calculateTotal(10000, 2); // â†’ 20000
```

### ë¹„ìˆœìˆ˜ í•¨ìˆ˜ (ê¸ˆì§€)

```typescript
// âŒ ê¸ˆì§€ 1: ì™¸ë¶€ ë³€ìˆ˜ ë³€ê²½
let total = 0;

export const addToTotal = (amount: number) => {
  total += amount;  // ì™¸ë¶€ ìƒíƒœ ë³€ê²½ âŒ
  return total;
};

// âŒ ê¸ˆì§€ 2: ì…ë ¥ ê°ì²´ ë³€ê²½
export const updateUser = (user: User) => {
  user.updatedAt = new Date();  // ì…ë ¥ ê°ì²´ ë³€ê²½ âŒ
  return user;
};

// âŒ ê¸ˆì§€ 3: ì™¸ë¶€ ìƒíƒœ ì˜ì¡´
export const getDiscountRate = () => {
  return Number(localStorage.getItem('rate'));  // ì™¸ë¶€ ìƒíƒœ ì˜ì¡´ âŒ
};

// âŒ ê¸ˆì§€ 4: ëœë¤ê°’ ì‚¬ìš©
export const generateId = () => {
  return Math.random().toString();  // ë§¤ë²ˆ ë‹¤ë¥¸ ê²°ê³¼ âŒ
};

// âŒ ê¸ˆì§€ 5: í˜„ì¬ ì‹œê°„ ì‚¬ìš©
export const getCurrentAge = (birthYear: number) => {
  return new Date().getFullYear() - birthYear;  // ì‹œê°„ ì˜ì¡´ âŒ
};

// âŒ ê¸ˆì§€ 6: API í˜¸ì¶œ
export const getUserName = async (id: string) => {
  const response = await fetch(`/api/users/${id}`);  // API í˜¸ì¶œ âŒ
  return response.json();
};
```

### ì˜¬ë°”ë¥¸ ìˆœìˆ˜ í•¨ìˆ˜

```typescript
// âœ… ì˜ˆì‹œ 1: ìƒˆë¡œìš´ ê°’ ë°˜í™˜
export const addToTotal = (currentTotal: number, amount: number): number => {
  return currentTotal + amount;
};

// âœ… ì˜ˆì‹œ 2: ìƒˆ ê°ì²´ ë°˜í™˜
export const updateUser = (user: User, updatedAt: Date): User => {
  return { ...user, updatedAt };
};

// âœ… ì˜ˆì‹œ 3: ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê¸°
export const calculateDiscount = (price: number, discountRate: number): number => {
  return price * discountRate;
};

// âœ… ì˜ˆì‹œ 4: ë§¤ê°œë³€ìˆ˜ë¡œ ëœë¤ê°’ ë°›ê¸°
export const generateId = (randomValue: number): string => {
  return randomValue.toString();
};

// âœ… ì˜ˆì‹œ 5: ë§¤ê°œë³€ìˆ˜ë¡œ ì‹œê°„ ë°›ê¸°
export const calculateAge = (birthYear: number, currentYear: number): number => {
  return currentYear - birthYear;
};

// âœ… ì˜ˆì‹œ 6: ë°ì´í„°ë§Œ ë°›ê¸° (APIëŠ” í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ)
export const formatUserName = (user: User): string => {
  return `${user.lastName} ${user.firstName}`;
};
```

---

## ë¶ˆë³€ì„± ê·œì¹™

### ì›ì¹™: ì›ë³¸ ë°ì´í„°ë¥¼ ì ˆëŒ€ ë³€ê²½í•˜ì§€ ì•ŠìŒ

**ë¶ˆë³€ì„± ìœ ì§€ ë°©ë²•:**
- ë°°ì—´: ìƒˆ ë°°ì—´ ìƒì„± (`[...array]`, `map`, `filter`, `reduce`)
- ê°ì²´: ìƒˆ ê°ì²´ ìƒì„± (`{...object}`)
- ì¤‘ì²© ë°ì´í„°: ê¹Šì€ ë³µì‚¬

### ë°°ì—´ ë¶ˆë³€ì„±

```typescript
// âŒ ê¸ˆì§€: ì›ë³¸ ë°°ì—´ ë³€ê²½
export const addItem = (items: Item[], newItem: Item): Item[] => {
  items.push(newItem);  // ì›ë³¸ ë³€ê²½ âŒ
  return items;
};

export const removeItem = (items: Item[], index: number): Item[] => {
  items.splice(index, 1);  // ì›ë³¸ ë³€ê²½ âŒ
  return items;
};

export const sortItems = (items: Item[]): Item[] => {
  items.sort((a, b) => a.price - b.price);  // ì›ë³¸ ë³€ê²½ âŒ
  return items;
};

// âœ… ì˜¬ë°”ë¦„: ìƒˆ ë°°ì—´ ë°˜í™˜
export const addItem = (items: Item[], newItem: Item): Item[] => {
  return [...items, newItem];  // ìƒˆ ë°°ì—´ âœ…
};

export const removeItem = (items: Item[], index: number): Item[] => {
  return items.filter((_, i) => i !== index);  // ìƒˆ ë°°ì—´ âœ…
};

export const sortItems = (items: Item[]): Item[] => {
  return [...items].sort((a, b) => a.price - b.price);  // ìƒˆ ë°°ì—´ âœ…
};

export const updateItem = (items: Item[], index: number, updates: Partial<Item>): Item[] => {
  return items.map((item, i) => 
    i === index ? { ...item, ...updates } : item
  );  // ìƒˆ ë°°ì—´ âœ…
};
```

### ê°ì²´ ë¶ˆë³€ì„±

```typescript
// âŒ ê¸ˆì§€: ì›ë³¸ ê°ì²´ ë³€ê²½
export const updatePrice = (product: Product, newPrice: number): Product => {
  product.price = newPrice;  // ì›ë³¸ ë³€ê²½ âŒ
  return product;
};

export const addProperty = (user: User, role: string): User => {
  user.role = role;  // ì›ë³¸ ë³€ê²½ âŒ
  return user;
};

// âœ… ì˜¬ë°”ë¦„: ìƒˆ ê°ì²´ ë°˜í™˜
export const updatePrice = (product: Product, newPrice: number): Product => {
  return { ...product, price: newPrice };  // ìƒˆ ê°ì²´ âœ…
};

export const addProperty = (user: User, role: string): User => {
  return { ...user, role };  // ìƒˆ ê°ì²´ âœ…
};

export const updateMultipleFields = (
  user: User,
  updates: Partial<User>
): User => {
  return { ...user, ...updates };  // ìƒˆ ê°ì²´ âœ…
};
```

### ì¤‘ì²© ê°ì²´ ë¶ˆë³€ì„±

```typescript
// âŒ ê¸ˆì§€: ì¤‘ì²© ê°ì²´ ë³€ê²½
export const updateAddress = (user: User, newAddress: string): User => {
  user.profile.address = newAddress;  // ì¤‘ì²© ê°ì²´ ë³€ê²½ âŒ
  return user;
};

// âœ… ì˜¬ë°”ë¦„: ì¤‘ì²© ê°ì²´ë„ ìƒˆë¡œ ìƒì„±
export const updateAddress = (user: User, newAddress: string): User => {
  return {
    ...user,
    profile: {
      ...user.profile,
      address: newAddress,  // ì¤‘ì²© ê°ì²´ë„ ìƒˆë¡œ ìƒì„± âœ…
    },
  };
};

export const updateNestedData = (
  order: Order,
  itemIndex: number,
  newQuantity: number
): Order => {
  return {
    ...order,
    items: order.items.map((item, i) =>
      i === itemIndex
        ? { ...item, quantity: newQuantity }
        : item
    ),  // ì¤‘ì²© ë°°ì—´ë„ ìƒˆë¡œ ìƒì„± âœ…
  };
};
```

---

## ê¸ˆì§€ ì‚¬í•­

### âŒ ê¸ˆì§€ 1: ë¶€ì‘ìš© (Side Effects)

```typescript
// âŒ ì˜ëª»ë¨
let orderCount = 0;

export const processOrder = (order: Order) => {
  orderCount++;  // ì „ì—­ ë³€ìˆ˜ ë³€ê²½ âŒ
  localStorage.setItem('lastOrder', order.id);  // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ âŒ
  console.log('Order processed');  // ì½˜ì†” ì¶œë ¥ë„ ë¶€ì‘ìš© âŒ
  return order;
};

// âœ… ì˜¬ë°”ë¦„
export const processOrder = (order: Order, orderNumber: number): ProcessedOrder => {
  return { ...order, orderNumber };  // ìˆœìˆ˜ í•¨ìˆ˜ âœ…
};

// ë¶€ì‘ìš©ì€ í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì²˜ë¦¬
const handleProcess = async (order: Order) => {
  const orderNumber = orderCount + 1;
  const processed = processOrder(order, orderNumber);
  
  setOrderCount(orderNumber);  // ìƒíƒœ ì—…ë°ì´íŠ¸
  localStorage.setItem('lastOrder', processed.id);  // ì €ì¥
  console.log('Order processed');  // ë¡œê¹…
  
  return processed;
};
```

### âŒ ê¸ˆì§€ 2: UI ì½”ë“œ

```typescript
// âŒ ì˜ëª»ë¨
export const validateUser = (user: User) => {
  if (!user.email) {
    alert('ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤');  // UI ì½”ë“œ âŒ
    return false;
  }
  
  showToast('ê²€ì¦ ì™„ë£Œ');  // UI ì½”ë“œ âŒ
  return true;
};

// âœ… ì˜¬ë°”ë¦„
export const validateUser = (user: User): ValidationResult => {
  const errors: string[] = [];
  
  if (!user.email) {
    errors.push('ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤');
  }
  
  return {
    valid: errors.length === 0,
    errors,
  };
};

// UIëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ì²˜ë¦¬
const handleValidate = () => {
  const result = validateUser(user);
  
  if (!result.valid) {
    showToast(result.errors[0]);  // UI ì²˜ë¦¬
    return;
  }
  
  showToast('ê²€ì¦ ì™„ë£Œ');
};
```

### âŒ ê¸ˆì§€ 3: API í˜¸ì¶œ

```typescript
// âŒ ì˜ëª»ë¨
export const saveUser = async (user: User) => {
  // ê²€ì¦
  if (!user.email) {
    throw new Error('Email required');
  }
  
  // API í˜¸ì¶œ âŒ
  await fetch('/api/users', {
    method: 'POST',
    body: JSON.stringify(user),
  });
  
  return user;
};

// âœ… ì˜¬ë°”ë¦„
// logic/user/userValidator.ts
export const validateUser = (user: User): ValidationResult => {
  const errors: string[] = [];
  if (!user.email) {
    errors.push('Email required');
  }
  return { valid: errors.length === 0, errors };
};

// api/user.api.ts
export const saveUser = async (user: User): Promise<User> => {
  const response = await apiClient.post('/users', user);
  return response.data;
};

// components/user-form.tsx
const handleSave = async () => {
  const validation = validateUser(user);
  if (!validation.valid) {
    showToast(validation.errors[0]);
    return;
  }
  
  await saveUser(user);
};
```

### âŒ ê¸ˆì§€ 4: ì™¸ë¶€ ì˜ì¡´ì„±

```typescript
// âŒ ì˜ëª»ë¨
export const calculateDiscount = (price: number) => {
  const rate = localStorage.getItem('discountRate');  // ì™¸ë¶€ ì˜ì¡´ âŒ
  return price * Number(rate);
};

export const getTodayDiscount = (price: number) => {
  const today = new Date().getDay();  // ì‹œê°„ ì˜ì¡´ âŒ
  const rate = today === 0 ? 0.2 : 0.1;  // ì¼ìš”ì¼ 20% í• ì¸
  return price * rate;
};

// âœ… ì˜¬ë°”ë¦„
export const calculateDiscount = (price: number, discountRate: number): number => {
  return price * discountRate;
};

export const getDiscountRate = (dayOfWeek: number): number => {
  return dayOfWeek === 0 ? 0.2 : 0.1;
};

// ì‚¬ìš©
const today = new Date().getDay();
const rate = getDiscountRate(today);
const discounted = calculateDiscount(price, rate);
```

---

## íŒŒì¼ êµ¬ì¡° ê·œì¹™

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
logic/
â”œâ”€â”€ user/                        # ì‚¬ìš©ì ë„ë©”ì¸
â”‚   â”œâ”€â”€ userValidator.ts         # ê²€ì¦ ë¡œì§
â”‚   â”œâ”€â”€ userValidator.test.ts
â”‚   â”œâ”€â”€ userFormatter.ts         # í¬ë§·íŒ… ë¡œì§
â”‚   â”œâ”€â”€ userFormatter.test.ts
â”‚   â”œâ”€â”€ userPermissions.ts       # ê¶Œí•œ ë¡œì§
â”‚   â””â”€â”€ userPermissions.test.ts
â”‚
â”œâ”€â”€ order/                       # ì£¼ë¬¸ ë„ë©”ì¸
â”‚   â”œâ”€â”€ orderCalculator.ts       # ê³„ì‚° ë¡œì§
â”‚   â”œâ”€â”€ orderCalculator.test.ts
â”‚   â”œâ”€â”€ orderValidator.ts        # ê²€ì¦ ë¡œì§
â”‚   â”œâ”€â”€ orderValidator.test.ts
â”‚   â”œâ”€â”€ orderStatus.ts           # ìƒíƒœ ë¨¸ì‹ 
â”‚   â””â”€â”€ orderStatus.test.ts
â”‚
â”œâ”€â”€ product/                     # ìƒí’ˆ ë„ë©”ì¸
â”‚   â”œâ”€â”€ productPricing.ts        # ê°€ê²© ë¡œì§
â”‚   â”œâ”€â”€ productPricing.test.ts
â”‚   â”œâ”€â”€ productStock.ts          # ì¬ê³  ë¡œì§
â”‚   â””â”€â”€ productStock.test.ts
â”‚
â”œâ”€â”€ payment/                     # ê²°ì œ ë„ë©”ì¸
â”‚   â”œâ”€â”€ paymentProcessor.ts      # ê²°ì œ ì²˜ë¦¬
â”‚   â”œâ”€â”€ paymentProcessor.test.ts
â”‚   â”œâ”€â”€ paymentValidator.ts      # ê²°ì œ ê²€ì¦
â”‚   â””â”€â”€ paymentValidator.test.ts
â”‚
â””â”€â”€ shared/                      # ê³µí†µ ë¡œì§
    â”œâ”€â”€ dateUtils.ts
    â”œâ”€â”€ dateUtils.test.ts
    â”œâ”€â”€ validators.ts
    â”œâ”€â”€ validators.test.ts
    â”œâ”€â”€ formatters.ts
    â””â”€â”€ formatters.test.ts
```

### íŒŒì¼ êµ¬ì„± ì›ì¹™

1. **ë„ë©”ì¸ë³„ ë¶„ë¦¬** - ê° ë„ë©”ì¸ì€ ë…ë¦½ëœ í´ë”
2. **ì—­í• ë³„ ë¶„ë¦¬** - Calculator, Validator, Formatter ë“±
3. **í…ŒìŠ¤íŠ¸ ë³‘ì¹˜** - ê°™ì€ í´ë”ì— `.test.ts` íŒŒì¼
4. **ê³µí†µ ë¡œì§ ë¶„ë¦¬** - `shared/` í´ë”

---

## ë„¤ì´ë° ê·œì¹™

### íŒŒì¼ëª…

```
[ë„ë©”ì¸ëª…][ì—­í• ].ts

ì˜ˆì‹œ:
- userValidator.ts       # ì‚¬ìš©ì ê²€ì¦
- orderCalculator.ts     # ì£¼ë¬¸ ê³„ì‚°
- productPricing.ts      # ìƒí’ˆ ê°€ê²©
- paymentProcessor.ts    # ê²°ì œ ì²˜ë¦¬
- orderStatus.ts         # ì£¼ë¬¸ ìƒíƒœ
- userPermissions.ts     # ì‚¬ìš©ì ê¶Œí•œ
```

### í•¨ìˆ˜ëª…

```typescript
// ë™ì‚¬ + ëª…ì‚¬ (camelCase)

// ê³„ì‚°
calculateTotal()
calculateDiscount()
calculateTax()

// ê²€ì¦
validateUser()
validateEmail()
isValidPassword()

// ë³€í™˜
formatPhoneNumber()
formatCurrency()
parseDate()

// í™•ì¸/ì²´í¬
canCancelOrder()
isEligibleForDiscount()
hasPermission()

// ìƒíƒœ ì „ì´
transitionStatus()
canTransitionTo()

// ì¡°íšŒ
getDiscountRate()
getStatusLabel()
```

### ìƒìˆ˜ëª…

```typescript
// UPPER_SNAKE_CASE
export const TAX_RATE = 0.1;
export const SHIPPING_FEE = 3000;
export const FREE_SHIPPING_THRESHOLD = 50000;
export const MIN_PASSWORD_LENGTH = 8;
export const MAX_QUANTITY_PER_ITEM = 99;

// ì—´ê±°í˜•
export const ORDER_STATUS = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  SHIPPED: 'shipped',
  DELIVERED: 'delivered',
} as const;
```

---

## ë„ë©”ì¸ íŒ¨í„´

### 1. Calculator (ê³„ì‚° ë¡œì§)

```typescript
// logic/order/orderCalculator.ts
import type { Order, OrderItem } from '@/types/order.types';
import { TAX_RATE, SHIPPING_FEE } from '@/constants/order';

/**
 * í•­ëª© ì´ì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤
 */
export const calculateItemTotal = (item: OrderItem): number => {
  return item.price * item.quantity;
};

/**
 * ì£¼ë¬¸ ì†Œê³„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤
 */
export const calculateSubtotal = (items: OrderItem[]): number => {
  return items.reduce((sum, item) => sum + calculateItemTotal(item), 0);
};

/**
 * ì„¸ê¸ˆì„ ê³„ì‚°í•©ë‹ˆë‹¤
 */
export const calculateTax = (subtotal: number): number => {
  return Math.round(subtotal * TAX_RATE);
};

/**
 * ë°°ì†¡ë¹„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤
 * ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: 50,000ì› ì´ìƒ ë¬´ë£Œ ë°°ì†¡
 */
export const calculateShipping = (subtotal: number): number => {
  return subtotal >= 50000 ? 0 : SHIPPING_FEE;
};

/**
 * ì£¼ë¬¸ ìµœì¢… ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤
 */
export const calculateOrderTotal = (order: Order): number => {
  const subtotal = calculateSubtotal(order.items);
  const tax = calculateTax(subtotal);
  const shipping = calculateShipping(subtotal);
  return subtotal + tax + shipping;
};
```

### 2. Validator (ê²€ì¦ ë¡œì§)

```typescript
// logic/user/userValidator.ts
import type { User } from '@/types/user.types';

export interface ValidationResult {
  valid: boolean;
  errors: ValidationError[];
}

export interface ValidationError {
  field: string;
  message: string;
}

/**
 * ì´ë©”ì¼ í˜•ì‹ì„ ê²€ì¦í•©ë‹ˆë‹¤
 */
export const isValidEmail = (email: string): boolean => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

/**
 * ë¹„ë°€ë²ˆí˜¸ ê°•ë„ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤
 * ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: 8ì ì´ìƒ, ì˜ë¬¸+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì
 */
export const isValidPassword = (password: string): boolean => {
  if (password.length < 8) return false;
  
  const hasLetter = /[a-zA-Z]/.test(password);
  const hasNumber = /[0-9]/.test(password);
  const hasSpecial = /[!@#$%^&*]/.test(password);
  
  return hasLetter && hasNumber && hasSpecial;
};

/**
 * ì‚¬ìš©ì ì •ë³´ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤
 */
export const validateUser = (user: Partial<User>): ValidationResult => {
  const errors: ValidationError[] = [];
  
  if (!user.name) {
    errors.push({ field: 'name', message: 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤' });
  }
  
  if (!user.email) {
    errors.push({ field: 'email', message: 'ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤' });
  } else if (!isValidEmail(user.email)) {
    errors.push({ field: 'email', message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤' });
  }
  
  return {
    valid: errors.length === 0,
    errors,
  };
};
```

### 3. Formatter (ë³€í™˜ ë¡œì§)

```typescript
// logic/user/userFormatter.ts
import type { User } from '@/types/user.types';

/**
 * ì „í™”ë²ˆí˜¸ë¥¼ í¬ë§·íŒ…í•©ë‹ˆë‹¤
 * ì˜ˆ: 01012345678 â†’ 010-1234-5678
 */
export const formatPhoneNumber = (phone: string): string => {
  const cleaned = phone.replace(/\D/g, '');
  
  if (cleaned.length === 11) {
    return `${cleaned.slice(0, 3)}-${cleaned.slice(3, 7)}-${cleaned.slice(7)}`;
  }
  
  if (cleaned.length === 10) {
    return `${cleaned.slice(0, 3)}-${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;
  }
  
  return phone;
};

/**
 * ì‚¬ìš©ì ì´ë¦„ì„ í¬ë§·íŒ…í•©ë‹ˆë‹¤
 */
export const formatUserName = (user: Pick<User, 'lastName' | 'firstName'>): string => {
  return `${user.lastName} ${user.firstName}`;
};

/**
 * ê¸ˆì•¡ì„ í¬ë§·íŒ…í•©ë‹ˆë‹¤
 * ì˜ˆ: 10000 â†’ "10,000ì›"
 */
export const formatCurrency = (amount: number): string => {
  return `${amount.toLocaleString('ko-KR')}ì›`;
};
```

### 4. Status (ìƒíƒœ ë¨¸ì‹ )

```typescript
// logic/order/orderStatus.ts
import type { OrderStatus } from '@/types/order.types';

export const ORDER_STATUS = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  PROCESSING: 'processing',
  SHIPPED: 'shipped',
  DELIVERED: 'delivered',
  CANCELLED: 'cancelled',
} as const;

/**
 * ì£¼ë¬¸ ìƒíƒœ ì „ì´ê°€ ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤
 */
export const canTransitionTo = (
  currentStatus: OrderStatus,
  nextStatus: OrderStatus
): boolean => {
  const transitions: Record<OrderStatus, OrderStatus[]> = {
    [ORDER_STATUS.PENDING]: [ORDER_STATUS.CONFIRMED, ORDER_STATUS.CANCELLED],
    [ORDER_STATUS.CONFIRMED]: [ORDER_STATUS.PROCESSING, ORDER_STATUS.CANCELLED],
    [ORDER_STATUS.PROCESSING]: [ORDER_STATUS.SHIPPED, ORDER_STATUS.CANCELLED],
    [ORDER_STATUS.SHIPPED]: [ORDER_STATUS.DELIVERED],
    [ORDER_STATUS.DELIVERED]: [],
    [ORDER_STATUS.CANCELLED]: [],
  };
  
  return transitions[currentStatus]?.includes(nextStatus) ?? false;
};

/**
 * ì£¼ë¬¸ ì·¨ì†Œê°€ ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤
 * ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ë°°ì†¡ ì „ê¹Œì§€ë§Œ ì·¨ì†Œ ê°€ëŠ¥
 */
export const canCancelOrder = (status: OrderStatus): boolean => {
  return [
    ORDER_STATUS.PENDING,
    ORDER_STATUS.CONFIRMED,
    ORDER_STATUS.PROCESSING,
  ].includes(status);
};
```

### 5. Permissions (ê¶Œí•œ ë¡œì§)

```typescript
// logic/user/userPermissions.ts
import type { User, UserRole } from '@/types/user.types';

/**
 * ì‚¬ìš©ìê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
 */
export const canEditResource = (
  user: User,
  resourceOwnerId: string
): boolean => {
  // ê´€ë¦¬ìëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ìˆ˜ì • ê°€ëŠ¥
  if (user.role === 'admin') return true;
  
  // ì†Œìœ ìë§Œ ìˆ˜ì • ê°€ëŠ¥
  return user.id === resourceOwnerId;
};

/**
 * ì‚¬ìš©ìê°€ íŠ¹ì • ê¸°ëŠ¥ì— ì ‘ê·¼í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
 */
export const hasFeatureAccess = (
  user: User,
  feature: string
): boolean => {
  const featurePermissions: Record<string, UserRole[]> = {
    'analytics': ['admin', 'manager'],
    'user_management': ['admin'],
    'export_data': ['admin', 'manager'],
    'view_reports': ['admin', 'manager', 'user'],
  };
  
  const allowedRoles = featurePermissions[feature] || [];
  return allowedRoles.includes(user.role);
};
```

---

## íƒ€ì… ì •ì˜ ê·œì¹™

### ì›ì¹™: ëª¨ë“  í•¨ìˆ˜ëŠ” ëª…í™•í•œ íƒ€ì…

```typescript
// âŒ ê¸ˆì§€: any íƒ€ì…
export const calculateTotal = (items: any): any => {
  return items.reduce((sum, item) => sum + item.price * item.quantity, 0);
};

// âœ… í•„ìˆ˜: ëª…í™•í•œ íƒ€ì…
export const calculateTotal = (items: OrderItem[]): number => {
  return items.reduce((sum, item) => sum + item.price * item.quantity, 0);
};
```

### ì…ë ¥/ì¶œë ¥ íƒ€ì…

```typescript
// types/order.types.ts

// ì—”í‹°í‹°
export interface Order {
  id: string;
  items: OrderItem[];
  customerName: string;
  customerEmail: string;
  status: OrderStatus;
  createdAt: string;
}

export interface OrderItem {
  productId: string;
  productName: string;
  price: number;
  quantity: number;
}

// ê³„ì‚° ê²°ê³¼
export interface OrderTotals {
  subtotal: number;
  tax: number;
  shipping: number;
  total: number;
}

// ê²€ì¦ ê²°ê³¼
export interface ValidationResult {
  valid: boolean;
  errors: ValidationError[];
}

export interface ValidationError {
  field: string;
  message: string;
}

// ìƒíƒœ
export type OrderStatus = 
  | 'pending'
  | 'confirmed'
  | 'processing'
  | 'shipped'
  | 'delivered'
  | 'cancelled';
```

---

## í…ŒìŠ¤íŠ¸ ê·œì¹™

### ì›ì¹™: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ í•„ìˆ˜

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.**

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```typescript
// logic/order/orderCalculator.test.ts
import { describe, it, expect } from '@jest/globals';
import {
  calculateItemTotal,
  calculateSubtotal,
  calculateShipping,
  calculateOrderTotal,
} from './orderCalculator';

describe('orderCalculator', () => {
  describe('calculateItemTotal', () => {
    it('í•­ëª© ì´ì•¡ì„ ê³„ì‚°í•œë‹¤', () => {
      const item = { productId: '1', price: 10000, quantity: 2 };
      expect(calculateItemTotal(item)).toBe(20000);
    });
    
    it('ìˆ˜ëŸ‰ì´ 0ì´ë©´ 0ì„ ë°˜í™˜í•œë‹¤', () => {
      const item = { productId: '1', price: 10000, quantity: 0 };
      expect(calculateItemTotal(item)).toBe(0);
    });
  });
  
  describe('calculateShipping', () => {
    it('50,000ì› ë¯¸ë§Œì´ë©´ ë°°ì†¡ë¹„ë¥¼ ë¶€ê³¼í•œë‹¤', () => {
      expect(calculateShipping(40000)).toBe(3000);
    });
    
    it('50,000ì› ì´ìƒì´ë©´ ë¬´ë£Œë‹¤', () => {
      expect(calculateShipping(50000)).toBe(0);
      expect(calculateShipping(60000)).toBe(0);
    });
    
    it('ê²½ê³„ê°’ì„ ì •í™•íˆ ì²˜ë¦¬í•œë‹¤', () => {
      expect(calculateShipping(49999)).toBe(3000);
      expect(calculateShipping(50000)).toBe(0);
    });
  });
});
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í•­ëª©

- [ ] **ì •ìƒ ì¼€ì´ìŠ¤** - ì¼ë°˜ì ì¸ ì…ë ¥
- [ ] **ì—£ì§€ ì¼€ì´ìŠ¤** - 0, ë¹ˆ ë°°ì—´, null/undefined
- [ ] **ê²½ê³„ê°’** - ìµœì†Œ/ìµœëŒ€ ê°’
- [ ] **ì—ëŸ¬ ì¼€ì´ìŠ¤** - ì˜ëª»ëœ ì…ë ¥
- [ ] **ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™** - ëª¨ë“  ì¡°ê±´ ë¶„ê¸°

---

## ë³µì¡ë„ ê´€ë¦¬

### ì›ì¹™: ë‹¨ìˆœí•˜ê³  ëª…í™•í•˜ê²Œ

**ë³µì¡ë„ ê¸°ì¤€:**
- **Cyclomatic Complexity < 10** (ë¶„ê¸° ë³µì¡ë„)
- **ì¤‘ì²© ê¹Šì´ < 3** (if ì¤‘ì²©)
- **í•¨ìˆ˜ ê¸¸ì´ < 30ì¤„**

### ë³µì¡ë„ ê°œì„ 

```typescript
// âŒ ë†’ì€ ë³µì¡ë„
export const processOrder = (order: Order): ProcessResult => {
  if (order.items.length > 0) {
    let total = 0;
    for (const item of order.items) {
      if (item.quantity > 0) {
        if (item.price > 0) {
          total += item.price * item.quantity;
          if (total > 100000) {
            if (order.customerType === 'VIP') {
              total *= 0.9;
            } else if (order.customerType === 'REGULAR') {
              total *= 0.95;
            }
          }
        }
      }
    }
    return { success: true, total };
  }
  return { success: false, total: 0 };
};

// âœ… ë‚®ì€ ë³µì¡ë„
export const calculateSubtotal = (items: OrderItem[]): number => {
  return items
    .filter(item => item.quantity > 0 && item.price > 0)
    .reduce((sum, item) => sum + item.price * item.quantity, 0);
};

export const applyDiscount = (
  total: number,
  customerType: CustomerType
): number => {
  if (total < 100000) return total;
  
  const discountRates: Record<CustomerType, number> = {
    VIP: 0.9,
    REGULAR: 0.95,
    NORMAL: 1.0,
  };
  
  return total * discountRates[customerType];
};

export const processOrder = (order: Order): ProcessResult => {
  if (order.items.length === 0) {
    return { success: false, total: 0 };
  }
  
  const subtotal = calculateSubtotal(order.items);
  const total = applyDiscount(subtotal, order.customerType);
  
  return { success: true, total };
};
```

---

## âœ… ì¤€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Critical Check (í•„ìˆ˜)

**ìˆœìˆ˜ í•¨ìˆ˜:**
- [ ] ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ì¶œë ¥
- [ ] ì™¸ë¶€ ìƒíƒœ ë³€ê²½ ì—†ìŒ
- [ ] ì™¸ë¶€ ìƒíƒœ ì˜ì¡´ ì—†ìŒ
- [ ] ë¶€ì‘ìš© ì—†ìŒ

**ë¶ˆë³€ì„±:**
- [ ] ë°°ì—´/ê°ì²´ ë³€ê²½ ì—†ìŒ
- [ ] ìƒˆë¡œìš´ ê°’ ë°˜í™˜

**ë ˆì´ì–´ ì±…ì„:**
- [ ] UI ì½”ë“œ ì—†ìŒ
- [ ] API í˜¸ì¶œ ì—†ìŒ
- [ ] ì „ì—­ ìƒíƒœ ë³€ê²½ ì—†ìŒ

**íƒ€ì… ì •ì˜:**
- [ ] ì…ë ¥ íƒ€ì… ëª…ì‹œ
- [ ] ì¶œë ¥ íƒ€ì… ëª…ì‹œ

**í…ŒìŠ¤íŠ¸:**
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ

### Quality Check (ê¶Œì¥)

**ë³µì¡ë„:**
- [ ] Cyclomatic Complexity < 10
- [ ] ì¤‘ì²© ê¹Šì´ < 3
- [ ] í•¨ìˆ˜ ê¸¸ì´ < 30ì¤„

**ì„¤ê³„:**
- [ ] ë‹¨ì¼ ì±…ì„ ì›ì¹™
- [ ] ëª…í™•í•œ í•¨ìˆ˜ëª…
- [ ] ë„ë©”ì¸ ìš©ì–´ ì‚¬ìš©

**ë¬¸ì„œí™”:**
- [ ] JSDoc ì£¼ì„
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ëª…ì‹œ
- [ ] ì˜ˆì œ í¬í•¨

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

### ì´ ê·œì¹™ì„ ìœ„ë°˜í•˜ë©´

- âŒ í…ŒìŠ¤íŠ¸ ì‘ì„± ì–´ë ¤ì›€
- âŒ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥ì„± ì¦ê°€
- âŒ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ë™ì‘
- âŒ ì½”ë“œ ì¬ì‚¬ìš© ë¶ˆê°€

### ì´ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ë©´

- âœ… ì‰¬ìš´ í…ŒìŠ¤íŠ¸ ì‘ì„±
- âœ… ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘
- âœ… ë†’ì€ ì¬ì‚¬ìš©ì„±
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´