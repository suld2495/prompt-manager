# 기능 기획안 작성 프로토콜 (AI PM 자동 플로우용)
`.claude/commands/feature-planning.md`

## 🎯 목적
사용자의 요구사항을 분석하여 구현 가능한 기능 기획안과 실행 가능한 태스크 목록을 생성합니다.

결과 파일: docs/result/planning/YYYY-MM-DD-[기능명]/plan.md

예시:
- docs/result/planning/2025-01-15-transaction-form/plan.md
- docs/result/planning/2025-01-15-transaction-form/tasks.md

---

## 📋 명령: 기능 기획 및 태스크 분해

다음 기능을 기획하고 태스크로 분해해주세요: $ARGUMENTS

---

## 📥 입력 양식

아래 항목을 작성해주세요:

### Q1. 무엇을 만들어야 하나요?
```
사용자가 이메일과 비밀번호로 회원가입할 수 있는 폼
```

### Q2. 어떤 데이터를 다루나요?
```
이메일, 비밀번호, 비밀번호 확인
```

### Q3. 주요 동작은 무엇인가요?
```
폼 입력 → 검증 → 제출 → 성공 메시지
```

### Q4. 기술 스택이 있나요? (선택)
```
React + TypeScript
```

### Q5. 특별한 제약사항이 있나요? (선택)
```
[여기에 작성 또는 비워두기]
```

---

## 🔍 PHASE 1: 요구사항 분석

### Step 1.1: 요구사항 명확화

```markdown
## 📋 요구사항 이해

### 사용자가 원하는 것
[사용자 요구사항을 한 문장으로 정리]

### 핵심 질문
1. **누가 사용하나?**
   - 타겟 사용자: [개인 사용자 / 관리자 / 팀 / ...]

2. **왜 필요한가?**
   - 해결하려는 문제: [문제 정의]
   - 현재 페인 포인트: [불편한 점]

3. **무엇을 할 수 있어야 하나?**
   - 필수 기능: [Must-have]
   - 선택 기능: [Nice-to-have]

4. **어떻게 사용하나?**
   - 주요 사용 시나리오: [시나리오 1-3개]
```

### Step 1.2: 범위 정의 (YAGNI 적용)

```markdown
## ✅ 구현할 것 (Scope IN)

### 핵심 기능만
- [ ] [기능 1] - 필수
- [ ] [기능 2] - 필수
- [ ] [기능 3] - 필수

**판단 기준:**
- ✅ 없으면 기능이 작동 안 함
- ✅ 사용자가 명시적으로 요청
- ✅ 최소 동작에 필수

---

## ❌ 구현하지 않을 것 (Scope OUT)

### 나중에 필요하면 추가할 것
- [ ] [기능 A] - Nice-to-have
- [ ] [기능 B] - 확장 기능
- [ ] [기능 C] - 최적화

**제외 이유:**
- ❌ 첫 버전에 불필요
- ❌ 사용자가 요청 안 함
- ❌ "나중에 필요할 것 같아서"
- ❌ 최적화/확장 기능

---

## ⏳ 보류 (Later)

### Phase 2 이후 고려
- [ ] [기능 X] - 사용자 피드백 후
- [ ] [기능 Y] - 성능 이슈 발생 시
- [ ] [기능 Z] - 3번 반복 후 추상화
```

---

## 📝 PHASE 2: 기능 기획서 작성

### Step 2.1: 사용자 시나리오

```markdown
## 👤 사용자 시나리오

### 시나리오 1: [주요 플로우]

**사용자 목표:** [달성하려는 것]

**순서:**
1. 사용자가 [액션]를 한다
2. 시스템이 [반응]을 보인다
3. 사용자가 [입력]을 한다
4. 시스템이 [결과]를 보여준다

**성공 조건:**
- ✅ [결과 1]
- ✅ [결과 2]

**예외 상황:**
- ⚠️ [에러 케이스 1] → [처리 방법]
- ⚠️ [에러 케이스 2] → [처리 방법]

---

### 시나리오 2: [보조 플로우]
[같은 형식으로 작성]
```

### Step 2.2: 데이터 모델

```markdown
## 🗄️ 데이터 구조

### 핵심 엔티티

**엔티티 1: [이름]**
```typescript
interface Entity1 {
  id: string;              // 필수 - 고유 식별자
  field1: string;          // 필수 - [설명]
  field2: number;          // 필수 - [설명]
  field3?: string;         // 선택 - [설명] (정말 필요한 경우만)
}
```

**판단 기준:**
- ✅ 필수 필드만 포함
- ❌ Optional(?)은 정말 필요할 때만
- ❌ "나중을 위한" 필드 금지

---

### 데이터 흐름
```
입력 → 검증 → 저장 → 표시
```

1. **입력**: 사용자가 [데이터]를 입력
2. **검증**: [검증 규칙]
3. **저장**: [저장 위치 - 로컬/서버]
4. **표시**: [표시 방법]
```

### Step 2.3: UI/UX 개요

```markdown
## 🎨 UI/UX 개요

### 화면 구성

**화면 1: [화면명]**
- 목적: [화면의 역할]
- 주요 요소:
  - [ ] [요소 1] - [설명]
  - [ ] [요소 2] - [설명]
- 상호작용:
  - [액션] → [결과]

---

### 화면 간 흐름
```
[화면1] → [버튼] → [화면2] → [저장] → [화면3]
```

---

### UI 제약사항
- ✅ 심플하게 - 과도한 디자인 금지
- ✅ 접근성 고려 - 레이블, 대비
- ✅ 모바일 우선 (React Native의 경우)
```

### Step 2.4: 기술 결정

```markdown
## 🔧 기술 스택 & 아키텍처

### 사용할 기술
- **프레임워크**: [React Native / Next.js / ...]
- **상태 관리**: [useState / Context / Zustand / ...]
- **데이터 저장**: [AsyncStorage / SQLite / API / ...]
- **스타일링**: [StyleSheet / Tailwind / ...]

**선택 기준:**
- ✅ 이미 프로젝트에서 사용 중
- ✅ 학습 곡선 낮음
- ✅ 요구사항 충족

---

### 아키텍처 패턴

**레이어 구조:**
```
UI Layer (컴포넌트)
  ↓
Business Logic Layer (hooks / utils)
  ↓
Data Layer (storage / API)
```

**원칙:**
- ✅ 단순한 구조 (3 레이어 이내)
- ✅ 레이어별 책임 명확
- ❌ 과도한 추상화 금지
```

### Step 2.5: 제약사항 정의

```markdown
## 🔒 제약사항

### 코드 제약
- 컴포넌트: 최대 100줄
- 함수: 최대 30줄
- useState: 최대 3개
- useEffect: 최대 2개
- useMemo/useCallback: 0개 (첫 구현)
- 매직 넘버/스트링: 0개 (즉시 상수화)

### 기능 제약
- ✅ TASK 명세된 것만 구현
- ❌ 추가 기능 금지
- ❌ 최적화 금지 (측정 전)
- ❌ 과도한 확장성 고려 금지

### 품질 제약
- ✅ 기본 에러 처리
- ✅ 명확한 네이밍
- ✅ 테스트 가능한 구조
- ❌ 복잡한 에러 처리 불필요
```

---

## 📋 PHASE 3: 태스크 분해

### Step 3.1: 태스크 추출 전략

```markdown
## 🎯 태스크 분해 원칙

### 기준
1. **시간**: 각 태스크는 2-4시간 이내
2. **독립성**: 다른 태스크와 독립적으로 테스트 가능
3. **완결성**: 각 태스크는 명확한 완료 조건
4. **순서**: 의존성 최소화하며 순차 진행

### 분해 방법
```
큰 기능
  ↓
레이어별 분리 (UI / Logic / Data)
  ↓
컴포넌트별 분리
  ↓
TASK 단위
```

### 분해 예시

**기능**: 사용자 로그인

**레이어 분리:**
- UI: 로그인 폼 화면
- Logic: 로그인 검증 로직
- Data: API 연동

**TASK 분리:**
- TASK-001: 로그인 폼 UI
- TASK-002: 폼 검증 로직
- TASK-003: API 연동
- TASK-004: 에러 처리
```

### Step 3.2: 태스크 목록 생성

```markdown
## 📝 TASK 목록

### TASK-001: [UI 뼈대 구성]

**목적**: 기본 화면 구조 생성

**범위**:
- [ ] 기본 레이아웃 컴포넌트 생성
- [ ] 네비게이션 설정
- [ ] 스타일링 (최소한만)

**완료 조건**:
- ✅ 화면이 렌더링됨
- ✅ 기본 스타일 적용됨
- ✅ 100줄 이하

**제외 사항**:
- ❌ 실제 기능 구현
- ❌ 데이터 연동
- ❌ 복잡한 스타일

**의존성**: 없음

**예상 시간**: 2시간

---

### TASK-002: [데이터 구조 정의]

**목적**: 타입 및 인터페이스 정의

**범위**:
- [ ] TypeScript 인터페이스 생성
- [ ] 기본 타입 정의
- [ ] 상수 정의 (매직 넘버 방지)

**완료 조건**:
- ✅ 모든 타입 정의됨
- ✅ 타입 에러 없음
- ✅ 상수 파일 생성됨

**제외 사항**:
- ❌ Optional 필드 (필수만)
- ❌ "나중을 위한" 타입
- ❌ 복잡한 제네릭

**의존성**: TASK-001

**예상 시간**: 1.5시간

---

### TASK-003: [핵심 기능 구현]

**목적**: 주요 기능 동작

**범위**:
- [ ] 상태 관리 (useState 3개 이하)
- [ ] 이벤트 핸들러
- [ ] 기본 비즈니스 로직

**완료 조건**:
- ✅ 기능이 동작함
- ✅ useState 3개 이하
- ✅ 함수 30줄 이하

**제외 사항**:
- ❌ 최적화 (useMemo/useCallback)
- ❌ 복잡한 로직
- ❌ 에러 처리 (다음 TASK)

**의존성**: TASK-002

**예상 시간**: 3시간

---

### TASK-004: [데이터 저장/로드]

**목적**: 데이터 영속성

**범위**:
- [ ] 저장 함수 구현
- [ ] 로드 함수 구현
- [ ] 기본 에러 처리

**완료 조건**:
- ✅ 데이터 저장됨
- ✅ 앱 재시작 후 로드됨
- ✅ 기본 에러 처리

**제외 사항**:
- ❌ 복잡한 에러 처리
- ❌ 재시도 로직
- ❌ 캐싱 전략

**의존성**: TASK-003

**예상 시간**: 2.5시간

---

### TASK-005: [유효성 검사]

**목적**: 입력 데이터 검증

**범위**:
- [ ] 필수 필드 검증
- [ ] 형식 검증
- [ ] 에러 메시지 표시

**완료 조건**:
- ✅ 잘못된 입력 방지
- ✅ 명확한 에러 메시지
- ✅ 사용자 피드백

**제외 사항**:
- ❌ 복잡한 검증 로직
- ❌ 비동기 검증
- ❌ 외부 라이브러리

**의존성**: TASK-003

**예상 시간**: 2시간

---

### TASK-006: [통합 및 빈 상태 처리]

**목적**: 전체 통합 및 엣지 케이스

**범위**:
- [ ] 모든 컴포넌트 통합
- [ ] 빈 상태 UI
- [ ] 로딩 상태 (필요시)

**완료 조건**:
- ✅ 전체 플로우 동작
- ✅ 빈 상태 표시
- ✅ 매끄러운 사용자 경험

**제외 사항**:
- ❌ 스켈레톤 UI (과도함)
- ❌ 애니메이션 (첫 구현)
- ❌ 복잡한 로딩 전략

**의존성**: TASK-004, TASK-005

**예상 시간**: 3시간

---

### 총 예상 시간: 14시간 (약 2일)
```

### Step 3.3: 의존성 그래프

```markdown
## 🔗 TASK 의존성

```
TASK-001 (UI 뼈대)
    ↓
TASK-002 (데이터 구조)
    ↓
TASK-003 (핵심 기능)
    ↓
    ├─→ TASK-004 (저장/로드)
    │       ↓
    └─→ TASK-005 (검증)
            ↓
        TASK-006 (통합)
```

**실행 순서:**
1. TASK-001 (독립)
2. TASK-002 (TASK-001 완료 후)
3. TASK-003 (TASK-002 완료 후)
4. TASK-004, TASK-005 (병렬 가능)
5. TASK-006 (모두 완료 후)
```

---

## 📊 PHASE 4: 최종 기획서 생성

```markdown
# 기능 기획서: [기능명]

## 📋 기본 정보
- **기능명**: [기능명]
- **요청자**: [요청자명 또는 "AI PM"]
- **작성일**: [날짜]
- **예상 기간**: [X일]
- **우선순위**: [High/Medium/Low]

---

## 🎯 목표

### 해결하려는 문제
[문제 정의 - 2-3문장]

### 기대 효과
- [효과 1]
- [효과 2]
- [효과 3]

---

## 👤 사용자 시나리오

### 시나리오 1: [주요 플로우]
[Step 2.1에서 작성한 내용]

### 시나리오 2: [보조 플로우]
[필요시 추가]

---

## 📐 설계

### 데이터 모델
[Step 2.2에서 작성한 내용]

### UI/UX 개요
[Step 2.3에서 작성한 내용]

### 기술 스택
[Step 2.4에서 작성한 내용]

---

## ✅ 구현 범위

### Scope IN (구현할 것)
[Step 1.2에서 정의한 내용]

### Scope OUT (구현하지 않을 것)
[Step 1.2에서 정의한 내용]

---

## 📝 TASK 목록

[Step 3.2에서 생성한 TASK 목록 전체]

---

## 🔒 제약사항

[Step 2.5에서 정의한 제약사항]

---

## 📏 성공 기준

### 기능적 완성도
- [ ] 모든 시나리오 동작
- [ ] 에러 케이스 처리
- [ ] 데이터 영속성 보장

### 코드 품질
- [ ] 모든 제약사항 준수
- [ ] 테스트 가능한 구조
- [ ] 명확한 네이밍

### 사용자 경험
- [ ] 직관적인 UI
- [ ] 빠른 응답 속도
- [ ] 명확한 피드백

---

## 🔄 다음 단계

1. ✅ 기획서 검토 및 승인
2. → TASK-001부터 순차 실행
3. → 각 TASK마다 코드 리뷰
4. → 전체 통합 테스트

---

## 📚 참고사항

### 유사 기능 (있다면)
- [기존 기능명] - [참고할 점]

### 주의사항
- [특별히 주의할 점]

### 추후 확장 가능성
- [Phase 2에서 고려할 기능들]
```

---

## 🎯 기획 원칙

### 1. YAGNI (You Aren't Gonna Need It)

```markdown
❌ 하지 말 것:
- "나중에 필요할 것 같아서" 기능 추가
- "확장성을 위한" 복잡한 설계
- "더 좋은 구조"를 위한 과도한 추상화

✅ 해야 할 것:
- 지금 당장 필요한 것만
- 최소한의 기능으로 동작
- 3번 반복될 때 추상화
```

### 2. 단순함 우선

```markdown
❌ 복잡한 설계:
- 5개 레이어 아키텍처
- Factory, Builder 패턴
- 미래를 위한 인터페이스

✅ 단순한 설계:
- 3개 레이어 (UI / Logic / Data)
- 직접적인 함수 호출
- 필요할 때 추상화
```

### 3. 측정 기반 의사결정

```markdown
❌ 추측:
- "이게 느릴 것 같아서" 최적화
- "확장될 것 같아서" 추상화
- "유연해야 할 것 같아서" 복잡화

✅ 측정:
- 실제로 느리면 최적화
- 3번 반복되면 추상화
- 요구사항 나오면 확장
```

---

## ✅ 기획서 체크리스트

### 완성도 확인
- [ ] 요구사항 명확히 정의됨
- [ ] 사용자 시나리오 구체적
- [ ] 데이터 모델 정의됨
- [ ] UI/UX 개요 작성됨
- [ ] 기술 스택 결정됨

### 범위 확인
- [ ] Scope IN 명확함
- [ ] Scope OUT 명확함
- [ ] 첫 버전에 필요한 것만 포함
- [ ] "나중을 위한" 기능 없음

### TASK 확인
- [ ] 모든 TASK 2-4시간 이내
- [ ] 완료 조건 명확
- [ ] 의존성 최소화
- [ ] 순차 실행 가능

### 제약사항 확인
- [ ] 코드 제약 정의됨
- [ ] 기능 제약 정의됨
- [ ] 품질 기준 명확함

---

## 🔄 AI PM 워크플로우 통합

### 전체 플로우

```
사용자 요구사항
  ↓
1번: 기획안 작성 (이 프롬프트)
  ↓
기획서 + TASK 목록
  ↓
FOR each TASK:
  ↓
  3번: 코드 작성
  ↓
  5번: 코드 리뷰
  ↓
  (반려 시) 6번: 코드 수정
  ↓
  (통과 시) 다음 TASK
  ↓
모든 TASK 완료
  ↓
4번: 통합 테스트 작성
```

---

## 💡 기획 패턴 예시

### 패턴 1: CRUD 기능

```markdown
TASK-001: UI 레이아웃
TASK-002: 생성(Create) 기능
TASK-003: 읽기(Read) 기능  
TASK-004: 수정(Update) 기능
TASK-005: 삭제(Delete) 기능
TASK-006: 통합 및 빈 상태
```

### 패턴 2: 폼 기반 기능

```markdown
TASK-001: 폼 UI
TASK-002: 입력 검증
TASK-003: 데이터 제출
TASK-004: 에러 처리
TASK-005: 성공 피드백
```

### 패턴 3: 목록 + 상세 기능

```markdown
TASK-001: 목록 화면
TASK-002: 상세 화면
TASK-003: 목록-상세 연결
TASK-004: 필터/정렬
TASK-005: 빈 상태 처리
```

---

완료! 이제 AI PM이 사용자 요구사항을 받아 자동으로 기획서와 TASK 목록을 생성합니다. 🎉